set editor = "vim +$" 
set my_name = "Morten Linderud"
set header_cache = "~/.cache/mutt"
set imap_check_subscribed
set imap_keepalive = 100000
unset imap_passive
set mbox_type=Maildir
set mailcap_path 	= ~/.mutt/mailcap
set signature = ~/.mutt/signature


set send_charset="us-ascii:utf-8"

set check_new=yes       # Check for new messages in maildir
set mail_check=5        # Check mail every 5 seconds
set timeout=5           # Time out 5 seconds after last keypress to check for mail
set forward_quote=no    # Don't quote forwards
set help=no	            # Disable the help header
set indent_string="> "  # Proper quoting
set read_inc=1000
set beep_new=yes
set write_inc=1000

set charset=utf-8
set send_charset=utf-8

alternative_order text/plain text/html text/enriched
auto_view text/html

set reverse_name
set reverse_realname
set hidden_host
set envelope_from	
set index_format="%Z %{%a %d %b %Y} %3M %-15.15L â”‚%s"
set sort=threads

set quit=no
set move=no
set confirmappend=no
set collapse_unread=no
set uncollapse_jump=yes
set crypt_use_gpgme 

set fast_reply=yes
set smart_wrap=yes

#set sidebar_shortpath = yes
set sidebar_sort=yes
set sidebar_width = 38
set sidebar_visible = yes
#set sidebar_folderindent = yes
set sidebar_delim = '|'
set pager_index_lines=10

macro index b '<enter-command>toggle sidebar_visible<enter><refresh>'
macro pager b '<enter-command>toggle sidebar_visible<enter><redraw-screen>'

bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open


bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
bind index u        sync-mailbox
bind pager u        sync-mailbox
bind index <space>  collapse-thread
bind index _        collapse-all

bind index   \t          next-unread
bind index  ,\t      previous-unread
bind pager   \t          next-unread
bind pager  ,\t      previous-unread



alternates ^mcfoxax@gmail.com$ ^morten.linderud@student.uib.no$

# imap
set imap_user="morten@linderud.pw"
set imap_pass=`pass mail`
set folder=imaps://imap.linderud.pw/
set spoolfile=+INBOX
set record=+Sent
set postponed=+Drafts

set realname = 'Morten Linderud'
set from = morten@linderud.pw
set use_from = yes
set envelope_from
set hidden_host
set ssl_force_tls = yes
set ssl_starttls = yes
set sendmail = "/usr/bin/msmtp"

set pgp_use_gpg_agent = yes
set pgp_sign_as =9FECBE16
set pgp_timeout = 20
set crypt_replyencrypt = yes
set crypt_use_gpgme = yes

macro index D \
    "<save-message>+Trash<enter>" \
    "move message to the trash"

macro index S \
    "<save-message>+Spam<enter>" \
    "mark message as spam"

macro index A \
    "<save-message>+Archive<enter>" \
    "mark message as spam"

# Edit sieve rules
macro index x "<shell-escape> pass mail | sieve-connect --user \"morten@linderud.pw\" --port=4190 --server imap.linderud.pw --notlsverify --remotesieve main --edit <enter>"

folder-hook . "exec collapse-all"

source "~/.mutt/colors"
source "~/.mutt/gpg.rc"
